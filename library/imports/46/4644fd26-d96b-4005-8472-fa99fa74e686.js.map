{"version":3,"sources":["assets\\scripts\\Star.js"],"names":["cc","Class","Component","properties","pickRadius","getPlayerDistance","playerPos","game","player","getPosition","dist","node","position","sub","mag","onPicked","spawnNewStar","gainScore","destroy","update","dt","opacityRatio","timer","starDuration","minOpacity","opacity","Math","floor"],"mappings":";;;;;;AAAAA,EAAE,CAACC,KAAK,CAAC;EACL,WAASD,EAAE,CAACE,SAAS;EAErBC,UAAU,EAAE;IACRC,UAAU,EAAE;EAChB,CAAC;EAEDC,iBAAiB,EAAE,SAAAA,kBAAA,EAAY;IAC3B,IAAIC,SAAS,GAAG,IAAI,CAACC,IAAI,CAACC,MAAM,CAACC,WAAW,EAAE;IAC9C,IAAIC,IAAI,GAAG,IAAI,CAACC,IAAI,CAACC,QAAQ,CAACC,GAAG,CAACP,SAAS,CAAC,CAACQ,GAAG,EAAE;IAClD,OAAOJ,IAAI;EACf,CAAC;EAEDK,QAAQ,EAAE,SAAAA,SAAA,EAAW;IACjB,IAAI,CAACR,IAAI,CAACS,YAAY,EAAE;IACxB,IAAI,CAACT,IAAI,CAACU,SAAS,EAAE;IACrB,IAAI,CAACN,IAAI,CAACO,OAAO,EAAE;EACvB,CAAC;EAEDC,MAAM,EAAE,SAAAA,OAAUC,EAAE,EAAE;IAClB,IAAI,IAAI,CAACf,iBAAiB,EAAE,GAAG,IAAI,CAACD,UAAU,EAAE;MAC5C,IAAI,CAACW,QAAQ,EAAE;MACf;IACJ;IAEA,IAAIM,YAAY,GAAG,CAAC,GAAG,IAAI,CAACd,IAAI,CAACe,KAAK,GAAC,IAAI,CAACf,IAAI,CAACgB,YAAY;IAC7D,IAAIC,UAAU,GAAG,EAAE;IACnB,IAAI,CAACb,IAAI,CAACc,OAAO,GAAGD,UAAU,GAAGE,IAAI,CAACC,KAAK,CAACN,YAAY,IAAI,GAAG,GAAGG,UAAU,CAAC,CAAC;EAClF;AACJ,CAAC,CAAC","sourceRoot":"/","sourcesContent":["cc.Class({\n    extends: cc.Component,\n    \n    properties: {\n        pickRadius: 0,\n    },\n\n    getPlayerDistance: function () {\n        var playerPos = this.game.player.getPosition();\n        var dist = this.node.position.sub(playerPos).mag();\n        return dist;\n    },\n\n    onPicked: function() {\n        this.game.spawnNewStar();\n        this.game.gainScore();\n        this.node.destroy();\n    },\n\n    update: function (dt) {\n        if (this.getPlayerDistance() < this.pickRadius) {\n            this.onPicked();\n            return;\n        }\n        \n        var opacityRatio = 1 - this.game.timer/this.game.starDuration;\n        var minOpacity = 50;\n        this.node.opacity = minOpacity + Math.floor(opacityRatio * (255 - minOpacity));\n    },\n});\n"]}